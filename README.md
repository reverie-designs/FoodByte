
=========
# FootByte

A Food pickup ordering app, saves times and satisfies your food cravings.
Your refactored route to rendering food to your internal digestive system.


## Desktop View

### Home Page
!["Screeshot of FoodByte home page"](https://github.com/reverie-designs/FoodByte/blob/master/public/docs/foodbyte-homepage.jpg)
Map View
!["Screeshot Foodbyte Home Page map view"](https://github.com/reverie-designs/FoodByte/blob/master/public/docs/foodbyte-map-view.jpg)

### Orders Page
!["Screeshot of Orders Page"](https://github.com/reverie-designs/FoodByte/blob/master/public/docs/foodbyte-orders.jpg)
### Order History
!["Screeshot of Order History"](https://github.com/reverie-designs/FoodByte/blob/master/public/docs/FoodByte%20-%20Order-History.jpg)

### Login
!["Screeshot of Foodbyte login"](https://github.com/reverie-designs/FoodByte/blob/master/public/docs/FoodByte%20-%20Login.png)

### Restaurant Set Time Owner Side 
<img src="https://github.com/reverie-designs/FoodByte/blob/master/public/docs/FoodByte-Owner%20Page.png"  alt="Screeshot of url sent to restaurant owner via SMS" width="220">

### Client Receives SMS
<img src="https://github.com/reverie-designs/FoodByte/blob/master/public/docs/foodbyte-sms-client.png"  alt="Screeshot of url sent to client via SMS" width="220">

## Contributors
[@HermSidhu](https://github.com/HermSidhu "@HermSidhu")
[@reverie-designs](https://github.com/reverie-designs "@reverie-designs")
[@johnarvi](https://github.com/johnarvi "@johnarvi")

## Project Setup

## Getting Started

1. Create the `.env` by using `.env.example` as a reference: `cp .env.example .env`
2. Update the .env file with your correct local information 
  - username: `labber` 
  - password: `labber` 
  - database: `midterm`
3. Install dependencies: `npm i`
4. Fix to binaries for sass: `npm rebuild node-sass`
5. Reset database: `npm run db:reset`
  - Check the db folder to see what gets created and seeded in the SDB
7. Run the server: `npm run local`
  - Note: nodemon is used, so you should not have to restart your server
8. Visit `http://localhost:8080/`
9. `< cntrl+c >` to exit server

## Warnings & Tips
- You need your own google maps api code to activate google maps `maps.js`
- You will need your own twilio authorization code to activate notifications via sms `confirm.js` `order.js`
- You will need to run secondary server with ngrok to allow users to access specific urls generated for your website to the sms `order.js`
- Do not edit the `layout.css` file directly, it is auto-generated by `layout.scss`
- Routes split into their own resource-based file names, as demonstrated with `users.js` and `widgets.js`
- Database schema  is split to (table definitions) and seeds (inserts) into separate files, one per table. See `db` folder for pre-populated examples. 
- Use the `npm run db:reset` command each time there is a change to the database schema or seeds. 
  - It runs through each of the files, in order, and executes them against the database. 
  - Note: you will lose all newly created (test) data each time this is run, since the schema files will tend to `DROP` the tables and recreate them.

## Dependencies

- Node 10.x or above
- NPM 5.x or above
- PG 6.x
- Cookie-sessions ^1.3 or above 
- Twillio 3.3 or above (you must have an account to install this)
- Dotenv 2.x or above
- Morgan - 1.9 or above
- Expresss - 4.17 or above
- Body-Parser 1.19 or above
- Chalk 2.4 or above
- Ejs 2.5 or above
- Node-sass-middleware 0.11 or above
- Pg-native 3.0 or above
## OTHER
- Twillio
- Ngrok

## Suggested
- Nodemon 1.19 or above
-- Note: if you do not have this dependency to start run `npm start` instead of `npm run local`

# Functionality 

- Routes - handles all the different website paths for the app
- Views contains all the ejs templates
- Helpers contains our helper functions
- Public contains our media and front end JS
- Server.js contains the main server and calls on routes
- DB contains database schema and seeds
- Styles contains SASS file for rendering css

## Functions Data Helpers
- `getUserWithEmail(string`: takes in an email and returns all user data based on user id
- `getAllRestaurants()`:  returns an array of objects with restaurant name, photos and id.
- `getAllRestaurantMenuItems(integer)`: takes in restaurant id returns an array of objects with menu_items
- `createOrder(integer, integer)`: takes in a userId and restaurant_id retuns creates an order for that user with that restaurant and returns it.
- `addUser(obj)`: takes in an object of user info and adds it to user table in the database then rerturns it.
- `addOrder(obj, integer)`: takes in an object of objects of selected menu items and  orderID inserts into order_items table and returns the order items object as in db

- `setOrderStatus(integer)`: takes in order id and sets status for that order returning the updated order.

- `getOrderTime(integer`: takes in a user id and returns the time of the latest order (object)

- `setOrderTime(integer, integer)`: takes in time and id updated specific order with updated time recieved from owner via sms

- `getOrderHistoryFromId(integer)`: takes in a user id and returns an array of objects of all the previous orders placed by a certain user

